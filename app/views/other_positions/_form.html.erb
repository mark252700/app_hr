
<%= simple_form_for(other_position) do |f| %>
    <%= f.error_notification %>
    <%= f.error_notification message: f.object.errors[:base].to_sentence if f.object.errors[:base].present? %>
    <% if @other_position.errors.any? %>
  <div id="error_explanation">
    <h2><%= pluralize(@other_position.errors.count, "error") %> prohibited this other position from being saved:</h2>
    <ul>
      <% @other_position.errors.full_messages.each do |message| %>
        <li><%= message %></li>
      <% end %>
    </ul>
  </div>
<% end %>
    <div id="cardContainer">
      <div class="card">
        <h5 class="card-header"></h5>
        <div class="card-body">
          <div class="row justify-content-left">
            <div class="col">
              <div class="form-group">
                <table class="table table-striped">
                  <tbody>
                    <tr>
                      <td>
                        <br>
                        <div class="mb-3">
                          <%= f.input :pos_title, label: 'Position Title', input_html: { class: 'form-control' } %>
                        </div>
                      </td>
                      <td>
                        <div class="mb-3">
                          <label>Years in this Position</label>
                          <%= f.input :pos_yr, label: 'year', input_html: { class: 'form-control' } %>
                        </div>
                      </td>
                      <td>
                        <br>
                        <div class="mb-3">
                          <%= f.input :pos_month, label: 'month', input_html: { class: 'form-control' } %>
                        </div>
                      </td>
                    </tr>
                  </tbody>
                </table>
                <br>
                <hr>
                <div class="card">
                  <h6 class="card-header">Based on the job description of your other role, what are the tasks do you currently perform?</h5>
                  <div class="card-body">
                    <div class="row justify-content-left">
                      <div class="col">
                        <div class="form-group">
                          <table class="table table-striped">
                            <button type="button" id="addRowBtn4" class="btn btn-success">+</button>
                            <thead>
                              <td class="col-4">Job Performed</td>
                              <td class="col-2">How often do you perform this task?</td>
                              <td class="col-1">Time allotted for this task</td>
                              <td class="col-1"></td>
                              <td class="col-1">Is this within your current job description</td>
                              <td class="col-3">Reason for doing this task</td>
                            </thead>
                            <tbody id="formContainer4">
                              <%= f.fields_for :other_perfromeds do |jb| %>
                                <tr>
                                  <td>
                                    <div class="mb-3">
                                      <br>
                                      <%= jb.input :job_performed, label: false, input_html: { class: 'form-control' } %>
                                    </div>
                                  </td>
                                  <td>
                                    <br>
                                    <div class="mb-3">
                                      <%= jb.select :job_done, options_for_select(["", "Daily", "Monthly", "Quarterly", "Annually"], jb.object.job_done), {}, class: 'form-select shorter-inputs' %>
                                    </div>
                                  </td>
                                  <td>
                                    <div class="mb-3">
                                      <label>Hours</label>
                                      <%= jb.number_field :job_hr, class: 'form-control shorter-input' %>
                                    </div>
                                  </td>
                                  <td>
                                    <div class="mb-3">
                                      <label>Minutes</label>
                                      <%= jb.number_field :job_min, class: 'form-control shorter-input' %>
                                    </div>
                                  </td>
                                  <td>
                                    <br>
                                    <div class="mb-3">
                                      <div class="form-check">
                                        <%= jb.radio_button :job_current, 'true', class: 'form-check-input' %>
                                        <label class="form-check-label">Yes</label>
                                      </div>
                                      <div class="form-check">
                                        <%= jb.radio_button :job_current, 'false', class: 'form-check-input' %>
                                        <label class="form-check-label">No</label>
                                      </div>
                                    </div>
                                  </td>
                                  <td>
                                    <br>
                                    <div class="mb-3">
                                      <%= jb.input :job_reason, label: false, input_html: { class: 'form-control long-input' } %>
                                    </div>
                                  </td>
                                  <td>
                                    <div class="mb-3">
                                      <br>
                                      <!-- Add remove button for each row -->
                                      <button type="button" class="remove-row4 btn btn-danger">Remove</button>
                                    </div>
                                  </td>
                                </tr>
                                
                              <% end %>
                            </tbody>
                          </table>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

       <br>
  <hr>
  <div class="card">
    <h6 class="card-header">Based on your knowledge without looking at your job description, what are the tasks within your job description	were not accomplished?</h5>
    <div class="card-body">
      <div class="row justify-content-center">
    <div class="col">
      <div class="form-group">
        <button type="button" id="addRowBtns" class="btn btn-success">+</button>
        <table class="table table-responsive-lg">
          <thead class="">
           
          </thead>
          <tbody class="border" id="formContainers">
          
        
         
    <%= f.fields_for :other_taskperformances do |t| %>
 <tr>
    <td class="col-4">
      <div class="mb-3">
        <%= t.input :task_notdone, label: 'Task that are not done', input_html: { class: 'form-control' } %>
        
      </div>
    </td>
    <td class="col-4">
      <div class="mb-3">
        <%= t.input :task_reason, label: 'Reasons for not doing the task', input_html: { class: 'form-control' } %>
      </div>
    </td>
    <td class="col-4">
      <div class="mb-3">
        <%= t.input :task_impact, label: 'Impact of not doing the task', input_html: { class: 'form-control' } %>
      </div>
    </td>
    <td class="col"><br>
      <div class="mb-3">
        <button type="button" class="remove-row btn btn-danger">Remove</button>
      </div>
    </td>
  </tr>
<%end%>


          </tbody>
        </table>
      </div>
    </div>
  </div>
   </div>
  </div>
  <br>
<hr>

 <div class="card">
    <h6 class="card-header">Required Competencies</h5>
    <div class="card-body">
      <div class="container mt-4">
        <div class="row justify-content-center">
          <div class="col">
            <table class="table table-lg">
             <button type="button" class="btn btn-success" id="addrows">+</button>
              <thead>
               
              </thead>
              <tbody id="benefittable">
                <!-- Use fields_for to handle nested attributes -->
                <%= f.fields_for :other_competences do |b| %>
                  <tr>
                    <td class="col-11">
                      <%= b.input :competencies, input_html: {class: 'form-control'} %>
                    </td>
                    <td>
                    <br>
                      <button type="button" class="removebenefit btn btn-danger">Remove</button>
                     
                    </td>
                  </tr>
                <% end %>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
<br>


      <div class="form-actions">
        <%= f.button :submit, 'Save', class: action_name == 'new' ? 'btn btn-primary' : 'btn btn-success' %>
       
      </div>
    </div>

  <% end %>

<script>
 document.getElementById('addRowBtn4').addEventListener('click', function() {
  var tbody = document.getElementById('formContainer4');
  var rowCount = tbody.getElementsByTagName('tr').length;

  var newRow = document.createElement('tr');
  newRow.innerHTML = `
    <td>
    <br>
      <div class="mb-3">
       
        <input type="text" name="other_position[other_perfromeds_attributes][${rowCount}][job_performed]" class="form-control">     </div>
    </td>
    <td>
    <br>
      <div class="mb-3">
       
        <select name="other_position[other_perfromeds_attributes][${rowCount}][job_done]" class="form-select shorter-inputs">
          <option value="none" selected></option>
          <option value="Daily">Daily</option>
          <option value="Monthly">Monthly</option>
          <option value="Quarterly">Quarterly</option>
          <option value="Annually">Annually</option>
        </select>
      </div>
    </td>
    <td>
      <div class="mb-3">
        <label>Hours</label>
        <input type="number" name="other_position[other_perfromeds_attributes][${rowCount}][job_hr]" class="form-control shorter-input">
      </div>
    </td>
    <td>
      <div class="mb-3">
        <label>Minutes</label>
        <input type="number" name="other_position[other_perfromeds_attributes][${rowCount}][job_min]" class="form-control shorter-input">
      </div>
    </td>
    <td>
    <br>
      <div class="mb-3">
        
        <div class="form-check">
          <input type="radio" name="other_position[other_perfromeds_attributes][${rowCount}][job_current]" value="true" class="form-check-input">
          <label class="form-check-label">Yes</label>
        </div>
        <div class="form-check">
          <input type="radio" name="other_position[other_perfromeds_attributes][${rowCount}][job_current]" value="false" class="form-check-input">
          <label class="form-check-label">No</label>
        </div>
      </div>
    </td>
    <td>
    <br>
      <div class="mb-3">
       
        <input type="text" name="other_position[other_perfromeds_attributes][${rowCount}][job_reason]" class="form-control long-input">
      </div>
    </td>
    <td>
      <div class="mb-3">
        <br>
        <button type="button" class="remove-row4 btn btn-danger">Remove</button>
      </div>
    </td>
  `;

  tbody.appendChild(newRow);
});

// Add event listener to handle remove button clicks
document.getElementById('formContainer4').addEventListener('click', function(e) {
  if (e.target && e.target.className == 'remove-row4 btn btn-danger') {
    var row = e.target.closest('tr');
    row.parentNode.removeChild(row);
  }
});


document.getElementById('addRowBtns').addEventListener('click', function() {
  var tbody = document.getElementById('formContainers');
  var rowCount = tbody.getElementsByTagName('tr').length;

  var newRow = document.createElement('tr');
  newRow.innerHTML = `
    <td class="col-4">
      <div class="mb-3">
        <label>Task that are not done</label>
        <input type="text" name="other_position[other_taskperformances_attributes][${rowCount}][task_notdone]" class="form-control">
      </div>
    </td>
    <td class="col-4">
      <div class="mb-3">
        <label>Reasons for not doing the task</label>
        <input type="text" name="other_position[other_taskperformances_attributes][${rowCount}][task_reason]" class="form-control">
      </div>
    </td>
    <td class="col-4">
      <div class="mb-3">
        <label>Impact of not doing the task</label>
        <input type="text" name="other_position[other_taskperformances_attributes][${rowCount}][task_impact]" class="form-control">
      </div>
    </td>
     <td class="col"><br>
      <div class="mb-3">
        <button type="button" class="remove-row btn btn-danger">Remove</button>
      </div>
    </td>
  `;

  tbody.appendChild(newRow);
});

// Add event listener to handle remove button clicks
document.getElementById('formContainers').addEventListener('click', function(e) {
  if (e.target && e.target.className == 'remove-row btn btn-danger') {
    var row = e.target.closest('tr');
    row.parentNode.removeChild(row);
  }
});


  document.getElementById('addrows').addEventListener('click', function() {
  var tbody = document.getElementById('benefittable');
  var rowCount = tbody.getElementsByTagName('tr').length;
  
  var newRow = document.createElement('tr');
  newRow.innerHTML = `
    <td>
      <input type="text" name="other_position[other_competences_attributes][${rowCount}][competencies]" class="form-control">
    </td>
    <td>
      <button type="button" class="removebenefit btn btn-danger">Remove</button>
    </td>
  `;
  
  tbody.appendChild(newRow);
});

  // Add event listener to handle remove button clicks
  document.getElementById('benefittable').addEventListener('click', function(e) {
    if (e.target && e.target.className == 'removebenefit btn btn-danger') {
      var row = e.target.closest('tr');
      row.parentNode.removeChild(row);
    }
  });


</script>

